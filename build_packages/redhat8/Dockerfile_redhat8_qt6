FROM redhat/ubi8:8.10-1020 as builder-stage

# Prepare environment
RUN dnf update -y && \
  dnf install -y \
  unzip \
  curl \
  cmake \
  ninja-build \
  git \
  zlib-devel \
  gcc \
  gcc-c++ \
  python3 python3-pip && \
  dnf clean all && rm -rf /var/cache/yum

RUN mkdir /opt/qt6 && cd /opt/qt6

RUN pip3 install --upgrade pip && pip3 install aqtinstall && aqt install-qt linux desktop 6.5.3 -m qtcharts && ls /6.5.3

ENV QTDIR="/6.5.3/gcc_64"
ENV PATH="$QTDIR/bin:$PATH"
ENV LD_LIBRARY_PATH="$QTDIR/lib:$LD_LIBRARY_PATH"

